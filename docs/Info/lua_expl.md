---
description: Объяснение ELRS скрипта
---

# Объяснение ELRS.lua скрипта

## Заголовок
Первая строка, "Заголовок" покажет вам некоторую о ELRS соединении.
![](https://www.expresslrs.org/assets/images/lua/lua-header.jpg)

### Идентификатор модели
Показывает имя текущего активного внешнего передатчика или устройства.

### Счётчик пакетов
Показывает количество плохих и хороших пакетов, полученных от приёмника. Вторая цифра должна соответствовать выбранному вами пакетрейту (Packet Rate), например, если вы поставили `Packet Rate` на 500 Гц, счётчик пакетов должен показывать 0/500, это означает, что вы не получаете плохие пакеты (0 плохих пакетов), а только хорошие пакеты (500 хороших пакетов). Любое небольшое колебание является нормальным и часто возвращается к 100% хороших пакетов, особенно когда вы изменяете настройку и она сохраняется в памяти.
Если индикатор начинает показывать плохие пакеты, а приём хороших пакетов прекращается, это не очень хорошая ситуация. Убедитесь, что ваше устройство или внешний модуль не перегревается и всё еще имеет хорошее соединение с приёмником. Это может быть опасно, когда дрон заармлен и вы летите за пару километров от места взлёта, и так это может привести к случайному `Failsafe`.

### Индикатор подключения
Показывает текущий статус подключения. Когда нет подключения к приёмнику, он должен показывать тире ( `-` ), в то время, как буква `C` показывается при подключенном состоянии. `Model mismatch` сообщение показывает, что вы подключены к приёмнику, но модель на пульте выбрана неверно. Посмотрите [Model Match](#model-match) для более подробной информации. 
![](https://www.expresslrs.org/assets/images/lua/lua-mismatch.jpg)
`Armed` показывает, что арм переключатель активен. Это должно предупредить пользователей, что изменение параметров, может привести к рассинхронизации с приёмника или рассоединения с ним, приводя к `FAILSAFE`. 

## Строка версии
Строка версии расположена почти в самом низу `ELRS.lua`, показывающая версию прошивки на устройстве.  Которая представлена на обоих устройствах TX и RX. 
![](https://www.expresslrs.org/assets/images/lua/lua-other.png)

 В данном примере:

* `3.3.0` - Номер версии ELRS в виде `Major.Minor.Patch` (см. [объяснение](https://semver.org/lang/ru/)).
* `ISM2G4` - область использования (CN, EU, US). TX и RX должны совпадать.
* `ae9df3` - хэш коммита из Git для версии или ветки.

## Названия папки
Пункты с `>` в начале названия это папки. К примеру `TX Power`, `VTX Administrator`, `WiFi Connectivity`. Эти элементы теперь будут отображать текущие настройки. Например, TX Power будет показывать текущее установленное значение мощности, а если включена функция Dynamic Power, то будет отображаться установленная максимальная мощность за указателем Dyn.

## Packet Rate и Telemetry Ratio
![](https://www.expresslrs.org/assets/images/lua/lua-other.png)
`Packet Rate` и `Telem Ratio` в `ELRS.lua` позволяют менять параметры производительности. 

* `Packet Rate` устанавливает скорость отправки пакетов данных: более высокие значения означают более частую отправку пакетов и меньшую задержку, но меньшую дальность и наоборот. 
Доступные опции для `2.4 Гц`:

  * `50 Гц`, `150 Гц`, `250 Гц` и `500 Гц`:  Lora-основанные режимы. Более высокие значения означают меньшую задержку, но меньшую чувствительность.
  * `F500` и `F1000`: Чистый FLRC для меньшей задержки, уменьшенный радиус задержки по сравнению с Lora, 500 Гц и 1000 Гц.
  * `D250` и `D500`: Режимы избыточной передачи FLRC. `D` означает для `Déjà Vu`, 250 Гц и 500 Гц. Более высокая задержка, уменьшенное колебание пакетов и более высокий LQ. Такой же диапазон, как и у других режимов FLRC.
  * `100 Гц Full` и `333 Гц Full`: Lora-основанные 10-битное полное разрешение с вариантами переключения режимов на 8/12/16 каналов.

Доступные опции для `900 МГц`:

  * `25 Гц`, `50 Гц`, `100 Гц` и `200 Гц`: Lora-основанные режимы. Более высокие значения означают меньшую задержку, но меньшую чувствительность.
  * `100 Гц Full`: Lora-основанное 10-битное полное разрешение с вариантами переключения режимов на 8/12/16 каналов.
  * `D50 Гц`: Lora-основанный режим избыточной передачи через DVDA.
  * `250 Гц`: Доступно только на GemX устройствах.
  * `200 Гц Full`: Доступно только на GemX устройствах.
    
Следующие режимы доступны только для `GemX`:
 
  * `X150 Гц`: Перекрёстный диапазон, комбинирует 900 МГц и 2.4 ГГц.
  * `X100 Гц`:  Перекрёстный диапазон, комбинирует 900 МГц и 2.4 ГГц, Полное разрешение с вариантами переключения режимов на 8/12/16 каналов.
 
Число в скобках после частоты (например, -105dBm для 500Hz) является пределом чувствительности для данной частоты, то есть наименьшим значением RSSI в dBm, при котором пакеты всё ещё будут приниматься. Для получения дополнительной информации о пределе чувствительности см. раздел [Состояние сигнала](rssi.md).
___
**⚠️Внимание**
Никогда не меняйте `Packet Rate`, когда вы в воздухе, это **ПРИНУДИТЕЛЬНО ОТКЛЮЧАЕТ** передатчик от приёмника.
___

* `Telem Ratio` устанавливает коэффициент телеметрии или какая часть `Packet Rate` используется для передачи телеметрии. Режимы, в порядке увеличения скорости передачи телеметрии: `Выкл`, `1:128`, `1:64`, `1:32`, `1:16`, `1:8`, `1:4`, `1:2`. Коэффициент телеметрии 1:64 означает, что 1 из каждых 64 пакетов используется для телеметрии.
	* С v3.0 появилось два новых режима: `Std` и `Race`. `Std` изменяет коэффициент в зависимости от `Packet Rate`, а `Race` это то же самое, что и `Std`, но с отключённой телеметрией и синхронизацией во время арминга.

## Switch Mode
Настройка `Switch Mode` контролирует, как каналы AUX1-AUX8 передаются на приемник (4 основных канала всегда 10-битные). Варианты настроек — `Hybrid` и `Wide`. В режиме **Hybrid** доступно 6 каналов с 2, 3 или 6 положениями + 1 канал с 16 положениями, а в режиме **Wide** — 7 каналов с 64 или 128 положениями.
___
ⓘ **Инфо**
`Switch Mode` может быть переключен, только тогда, когда не подключен к приёмнику.
___

## Antenna Mode
Эта опция доступна только доступна на Gemini-оснащённых устройствах.
Доступные режимы:

* `Gemini`

    * Передаёт сразу через две антенны одновременно на разных частотах, 40 МГц отчасти (для 2.4 ГГц) или ~10 МГц (для 900 МГц).

 * `Ant 1/Ant 2`

    * Передает только на одной из антенн.
 
 * `Switch`

    * Переключается между двумя антеннами и передаёт
 
## Model Match
ExpressLRS поддерживает несколько профилей конфигурации, и профиль конфигурации выбирается путем установки свойства `Receiver ID` в настройках модели пульта -> Внутренняя/Внешняя RF -> Приемник (номер). 

Функция Model Match используется для предотвращения случайного выбора неправильной модели в пульте и управления с неожиданным пультом или конфигурацией ELRS. Установка этой функции в положение `Вкл` при подключенном приемнике заставит этот приемник подключаться только с текущим идентификатором приемника. Установка в положение `Выкл` позволит подключаться к любому привязанному приемнику (включая те, которые используют фразу привязки). Обе стороны соединения должны согласиться с настройкой Model Match. 

ID приемника активной модели отображается после значения опции.

## TX Power
Папка TX Power — это место, где можно изменить настройки мощности передачи модуля TX. Нажмите Enter, чтобы получить доступ к настройкам, и нажмите кнопку RTN, чтобы вернуться на предыдущую страницу.

* `Max Power` устанавливает максимальный уровень мощности, на которой ваш TX будет передавать.

* `Dynamic` включает функцию динамической мощности. `Off` означает, что TX будет передавать на максимально установленной мощности всё время. `Dyn` означает, что TX будет автоматически понижать мощность, чтобы сохранять энергию, если максимальная мощность не нужна. Опции `AUX9`, `AUX10`, `AUX11`, `AUX12` означают, что TX будет менять максимальную мощность на динамическую в зависимости от положения переключателя, где переключатель в **верхнем** положении (>1500) = динамическая мощность, в **нижнем** положении (<1500) = максимальная мощность.

* `Fan Tresh` устанавливает уровень мощности, при котором должен активироваться вентилятор, например, если установлено значение 100 мВт, то вентилятор начнет вращаться, если вы установите `Max Power` на 100 мВт при выключенном режиме `Dynamic`, после короткой задержки. Вентилятор будет продолжать работать некоторое время, даже если уровень мощности опустится ниже порога. Не все модули имеют разъем для вентилятора, который использует эту настройку. Значение порога вентилятора по умолчанию — 250 мВт.

## VTX Administrator
![](https://www.expresslrs.org/assets/images/lua/vtxrm.png)

VTX Administrator позволяет изменять настройки VTX непосредственно с вашего пульта и применять эти настройки VTX к любому приемнику, к которому вы подключаетесь. Настройки VTX отправляются каждый раз при установлении нового соединения или при нажатии кнопки `[Send VTX]`.

 ---

ⓘ **Инфо**
VTX Administrator будет отправлять текущие настройки VTX на полетный контроллер всякий раз, когда модуль TX обнаруживает подключение к RX. Это означает, что настройки будут повторно отправлены после потери и восстановления телеметрии. Таким образом, если вы использовали любой другой метод для изменения уровня мощности VTX (например, OSD), то эти настройки будут перезаписаны при потере и восстановлении телеметрии во время полета.
 
 ---

 * `Band` устанавливает VTX Band, доступные опции: `Off`, `A`, `B`, `E`, `F`, `R`, `L`. `Off` означает, что VTX Administrator не будет изменять никаких VTX настроек.

 * `Channel` устанавливает, доступные опции: от `1` до `8`, которые являются стандартными каналами в вышеуказанных диапазонах (`bands`).

 * `Pwr Lvl` устанавливает мощность VTX по индексу, доступные опции: `-`, от `1` до `8`.  Точные значения мощности приведены в VTX таблице на полётном контроллере.

 * `Pitmode`, доступные опции `On` и `Off`, которые позволяют вам быстро включать и выключать `Pitmode`.

 * Наконец, при нажатии на кнопку`[Send VTX]` настроенные параметры отправляются в приёмник, а далее в VTX. Эти настройки, также отправляются при каждом установлении соединения.

## WiFi Connectivity
Этот раздел содержит в себе все WiFi-относящиеся функции.

* `Enable WiFi` активирует WiFi модуль TX для обновления через WiFi.

* `Enable RX WiFi` переводит привязанный и подключённый приёмник в режим WiFi для обновления.

* `Enable Backpack WiFi` переводит `TX Backpack` в WiFi режим. 

* `Enable VRX WiFi` переводит `VRX Backpack`, который привязан и подключен к внутреннему `TX Backpack` в WiFi режим.

## Backpack Options
Параметры в этой папке позволяют вам изменять параметры, связанные с `Backpack`.

* `Backpack` - включает или выключает функцию Backpack.

* `DVR Rec` - выбирает какой канал AUX и какой видеоканал будет запускать DVR запись в очках.

* `DVR Srt Delay` - как скоро после включения переключателя AUX начнётся запись DVR.

* `DVR Stp Delay` - как скоро после выключения переключателя AUX закончится запись DVR.

* `HT Enable` - Включает и выключает `Headtracking` в очках. 

* `HT Start Channel` - канал для включения `Headtracking` в очках.

* `Telemetry` - разрешает `Backpack` отправлять кадры телеметрии через `ESPNOW`.

* `Version` - Версия прошивки для `Backpack` была встроена в рюкзак TX.

## Bind
Нажатие кнопки `[Bind]` активирует режим привязки для традиционной привязки. Это не влияет на пользователей, которые настроили фразу привязки, и в этом случае не требуется.

## BLE Joystick
Нажатие кнопки `[BLE Joystick]` активирует режим BLE Joystick, который позволяет подключаться к симуляторам через Bluetooth вашего компьютера. Для выхода из этого режима выполните перезагрузку или смените модель.